{"ast":null,"code":"var _jsxFileName = \"C:\\\\ECHO\\\\MERNSTACK\\\\New folder\\\\Job-Application-Portal\\\\frontend\\\\src\\\\components\\\\Applicants\\\\ViewListings.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport Button from '@material-ui/core/Button';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport NavbarApplicant from '../templates/NavbarApplicant';\nvar check = 0;\n\nclass JobsList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: {},\n      jobs: [],\n      sortedJobs: [],\n      sortRatingFlag: true,\n      sortSalaryFlag: true,\n      sortDurationFlag: true\n    };\n    this.renderIconRating = this.renderIconRating.bind(this);\n    this.renderIconSalary = this.renderIconSalary.bind(this);\n    this.renderIconDuration = this.renderIconDuration.bind(this);\n    this.showJob = this.showJob.bind(this);\n    this.sortRating = this.sortRating.bind(this);\n    this.sortSalary = this.sortSalary.bind(this);\n    this.sortDuration = this.sortDuration.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:4000/job').then(response => {\n      this.setState({\n        jobs: response.data,\n        sortedJobs: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/user/me', {\n      headers: {\n        \"token\": localStorage.getItem(\"token\") ? localStorage.getItem(\"token\").split(\" \")[1] : \"\"\n      }\n    }).then(res => {\n      this.setState({\n        user: res.data\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  showJob(jobId) {\n    console.log(this.state.user._id);\n    axios.get('http://localhost:4000/job/checkAccepted/' + this.state.user._id).then(res => {\n      res.data.gotAccepted === 1 ? alert(\"Can't Apply! You have been accepted to a job!\") : this.props.history.push('/apply-job/' + jobId);\n    }).catch(err => {\n      alert(err.response.data);\n    });\n  }\n\n  sortRating() {\n    var array = this.state.jobs;\n    var flag = this.state.sortRatingFlag;\n    array.sort(function (a, b) {\n      if (a.rating !== undefined && b.rating !== undefined) {\n        return (1 - flag * 2) * (new Date(a.rating) - new Date(b.rating));\n      } else {\n        return 1;\n      }\n    });\n    this.setState({\n      jobs: array,\n      sortRatingFlag: !this.state.sortRatingFlag\n    });\n  }\n\n  sortSalary() {\n    var array = this.state.jobs;\n    var flag = this.state.sortSalaryFlag;\n    array.sort(function (a, b) {\n      if (a.salary !== undefined && b.salary !== undefined) {\n        return (1 - flag * 2) * (new Date(a.salary) - new Date(b.salary));\n      } else {\n        return 1;\n      }\n    });\n    this.setState({\n      jobs: array,\n      sortSalaryFlag: !this.state.sortSalaryFlag\n    });\n  }\n\n  sortDuration() {\n    var array = this.state.jobs;\n    var flag = this.state.sortDurationFlag;\n    array.sort(function (a, b) {\n      if (a.duration !== undefined && b.duration !== undefined) {\n        return (1 - flag * 2) * (new Date(a.duration) - new Date(b.duration));\n      } else {\n        return 1;\n      }\n    });\n    this.setState({\n      jobs: array,\n      sortDurationFlag: !this.state.sortDurationFlag\n    });\n  }\n\n  renderIconRating() {\n    if (this.state.sortRatingFlag) {\n      return /*#__PURE__*/React.createElement(ArrowDownwardIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(ArrowUpwardIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }\n      });\n    }\n  }\n\n  renderIconSalary() {\n    if (this.state.sortSalaryFlag) {\n      return /*#__PURE__*/React.createElement(ArrowDownwardIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(ArrowUpwardIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }\n      });\n    }\n  }\n\n  renderIconDuration() {\n    if (this.state.sortDurationFlag) {\n      return /*#__PURE__*/React.createElement(ArrowDownwardIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(ArrowUpwardIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavbarApplicant, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 37\n      }\n    }), this.state.jobs && this.state.jobs.length !== 0 ? /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      md: 12,\n      lg: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 45\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 45\n      }\n    }, \"Recruiter Name\"), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.sortRating,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 56\n      }\n    }, this.renderIconRating()), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 124\n      }\n    }), \"Recruiter Rating\"), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.sortSalary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 56\n      }\n    }, this.renderIconSalary()), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 124\n      }\n    }), \"Salary (Rupees)\"), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.sortDuration,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 56\n      }\n    }, this.renderIconDuration()), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 128\n      }\n    }), \"Duration (months)\"), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 45\n      }\n    }, \"Deadline\"))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 33\n      }\n    }, this.state.jobs.map((job, ind) => (check = 0, moment(job.deadline).diff(moment()) > 0 ? job.receivedApplicants && job.receivedApplicants.map(getjob => getjob._id === this.state.user._id ? check = 1 : \"\") ? /*#__PURE__*/React.createElement(TableRow, {\n      key: ind,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 45\n      }\n    }, job.title), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 45\n      }\n    }, job.name), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 45\n      }\n    }, job.rating), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 45\n      }\n    }, job.salary), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 45\n      }\n    }, job.duration), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 45\n      }\n    }, job.deadline.split(\"T\")[0], \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 85\n      }\n    }), \" \", new Date(job.deadline).getUTCHours(), \":\", new Date(job.deadline).getUTCMinutes() ? new Date(job.deadline).getUTCMinutes() : \"00\"), this.state.user.jobsApplied && this.state.user.jobsApplied.length < 10 ? check ? /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      style: {\n        color: 'blue'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 56\n      }\n    }, \"Applied\")) : job.receivedApplicants && job.receivedApplicants.length < job.maxApplicants && job.noOfAccepted < job.maxPositions ? /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      style: {\n        color: 'green'\n      },\n      onClick: () => this.showJob(job['id'] ? job['id'] : job['_id']),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 56\n      }\n    }, \"Apply\")) : /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 56\n      }\n    }, \"Full\")) : \"You cannot apply to more than 10 jobs\") : \"\" : \"\"))))))) : \"There are no job listings yet!\");\n  }\n\n}\n\nexport default JobsList;","map":{"version":3,"sources":["C:/ECHO/MERNSTACK/New folder/Job-Application-Portal/frontend/src/components/Applicants/ViewListings.js"],"names":["React","Component","axios","moment","Paper","Grid","TableCell","TableHead","TableRow","Table","TableBody","Button","ArrowUpwardIcon","ArrowDownwardIcon","NavbarApplicant","check","JobsList","constructor","props","state","user","jobs","sortedJobs","sortRatingFlag","sortSalaryFlag","sortDurationFlag","renderIconRating","bind","renderIconSalary","renderIconDuration","showJob","sortRating","sortSalary","sortDuration","componentDidMount","get","then","response","setState","data","catch","error","console","log","headers","localStorage","getItem","split","res","err","jobId","_id","gotAccepted","alert","history","push","array","flag","sort","a","b","rating","undefined","Date","salary","duration","render","length","map","job","ind","deadline","diff","receivedApplicants","getjob","title","name","getUTCHours","getUTCMinutes","jobsApplied","color","maxApplicants","noOfAccepted","maxPositions"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AAEA,IAAIC,KAAK,GAAG,CAAZ;;AAEA,MAAMC,QAAN,SAAuBf,SAAvB,CAAiC;AAE7BgB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE,EADG;AAETC,MAAAA,IAAI,EAAE,EAFG;AAGTC,MAAAA,UAAU,EAAE,EAHH;AAITC,MAAAA,cAAc,EAAC,IAJN;AAKTC,MAAAA,cAAc,EAAE,IALP;AAMTC,MAAAA,gBAAgB,EAAE;AANT,KAAb;AASA,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKE,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBF,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKG,OAAL,GAAe,KAAKA,OAAL,CAAaH,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKI,UAAL,GAAkB,KAAKA,UAAL,CAAgBJ,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKK,UAAL,GAAkB,KAAKA,UAAL,CAAgBL,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKM,YAAL,GAAoB,KAAKA,YAAL,CAAkBN,IAAlB,CAAuB,IAAvB,CAApB;AACH;;AAEDO,EAAAA,iBAAiB,GAAG;AAChBhC,IAAAA,KAAK,CAACiC,GAAN,CAAU,2BAAV,EACMC,IADN,CACWC,QAAQ,IAAI;AACd,WAAKC,QAAL,CAAc;AAACjB,QAAAA,IAAI,EAAEgB,QAAQ,CAACE,IAAhB;AAAsBjB,QAAAA,UAAU,EAACe,QAAQ,CAACE;AAA1C,OAAd;AACH,KAHN,EAIMC,KAJN,CAIY,UAASC,KAAT,EAAgB;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KANN;AAQAvC,IAAAA,KAAK,CAACiC,GAAN,CAAU,+BAAV,EAA2C;AACvCS,MAAAA,OAAO,EAAE;AACL,iBAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,IAAgCD,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,CAAhC,GAA8E;AADlF;AAD8B,KAA3C,EAGQX,IAHR,CAGaY,GAAG,IAAI;AACZ,WAAKV,QAAL,CAAc;AAAClB,QAAAA,IAAI,EAAE4B,GAAG,CAACT;AAAX,OAAd;AACH,KALL,EAKOC,KALP,CAKaS,GAAG,IAAI;AAACP,MAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ;AAAiB,KALtC;AAMH;;AAEDnB,EAAAA,OAAO,CAACoB,KAAD,EAAO;AACVR,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKxB,KAAL,CAAWC,IAAX,CAAgB+B,GAA5B;AAEAjD,IAAAA,KAAK,CAACiC,GAAN,CAAU,6CAA4C,KAAKhB,KAAL,CAAWC,IAAX,CAAgB+B,GAAtE,EACKf,IADL,CACUY,GAAG,IAAI;AACTA,MAAAA,GAAG,CAACT,IAAJ,CAASa,WAAT,KAAyB,CAAzB,GAA6BC,KAAK,CAAC,+CAAD,CAAlC,GAAsF,KAAKnC,KAAL,CAAWoC,OAAX,CAAmBC,IAAnB,CAAwB,gBAAcL,KAAtC,CAAtF;AACH,KAHL,EAIKV,KAJL,CAIWS,GAAG,IAAI;AAACI,MAAAA,KAAK,CAACJ,GAAG,CAACZ,QAAJ,CAAaE,IAAd,CAAL;AAAyB,KAJ5C;AAKH;;AAEDR,EAAAA,UAAU,GACV;AACI,QAAIyB,KAAK,GAAG,KAAKrC,KAAL,CAAWE,IAAvB;AACA,QAAIoC,IAAI,GAAG,KAAKtC,KAAL,CAAWI,cAAtB;AACAiC,IAAAA,KAAK,CAACE,IAAN,CAAW,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACtB,UAAGD,CAAC,CAACE,MAAF,KAAaC,SAAb,IAA0BF,CAAC,CAACC,MAAF,KAAaC,SAA1C,EAAoD;AAChD,eAAO,CAAC,IAAIL,IAAI,GAAC,CAAV,KAAgB,IAAIM,IAAJ,CAASJ,CAAC,CAACE,MAAX,IAAqB,IAAIE,IAAJ,CAASH,CAAC,CAACC,MAAX,CAArC,CAAP;AACH,OAFD,MAGI;AACA,eAAO,CAAP;AACH;AACF,KAPH;AAQA,SAAKvB,QAAL,CAAc;AACVjB,MAAAA,IAAI,EAACmC,KADK;AAEVjC,MAAAA,cAAc,EAAC,CAAC,KAAKJ,KAAL,CAAWI;AAFjB,KAAd;AAIH;;AAEDS,EAAAA,UAAU,GACV;AACI,QAAIwB,KAAK,GAAG,KAAKrC,KAAL,CAAWE,IAAvB;AACA,QAAIoC,IAAI,GAAG,KAAKtC,KAAL,CAAWK,cAAtB;AACAgC,IAAAA,KAAK,CAACE,IAAN,CAAW,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACtB,UAAGD,CAAC,CAACK,MAAF,KAAaF,SAAb,IAA0BF,CAAC,CAACI,MAAF,KAAaF,SAA1C,EAAoD;AAChD,eAAO,CAAC,IAAIL,IAAI,GAAC,CAAV,KAAgB,IAAIM,IAAJ,CAASJ,CAAC,CAACK,MAAX,IAAqB,IAAID,IAAJ,CAASH,CAAC,CAACI,MAAX,CAArC,CAAP;AACH,OAFD,MAGI;AACA,eAAO,CAAP;AACH;AACF,KAPH;AAQA,SAAK1B,QAAL,CAAc;AACVjB,MAAAA,IAAI,EAACmC,KADK;AAEVhC,MAAAA,cAAc,EAAC,CAAC,KAAKL,KAAL,CAAWK;AAFjB,KAAd;AAIH;;AAEDS,EAAAA,YAAY,GACZ;AACI,QAAIuB,KAAK,GAAG,KAAKrC,KAAL,CAAWE,IAAvB;AACA,QAAIoC,IAAI,GAAG,KAAKtC,KAAL,CAAWM,gBAAtB;AACA+B,IAAAA,KAAK,CAACE,IAAN,CAAW,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACtB,UAAGD,CAAC,CAACM,QAAF,KAAeH,SAAf,IAA4BF,CAAC,CAACK,QAAF,KAAeH,SAA9C,EAAwD;AACpD,eAAO,CAAC,IAAIL,IAAI,GAAC,CAAV,KAAgB,IAAIM,IAAJ,CAASJ,CAAC,CAACM,QAAX,IAAuB,IAAIF,IAAJ,CAASH,CAAC,CAACK,QAAX,CAAvC,CAAP;AACH,OAFD,MAGI;AACA,eAAO,CAAP;AACH;AACF,KAPH;AAQA,SAAK3B,QAAL,CAAc;AACVjB,MAAAA,IAAI,EAACmC,KADK;AAEV/B,MAAAA,gBAAgB,EAAC,CAAC,KAAKN,KAAL,CAAWM;AAFnB,KAAd;AAIH;;AAEDC,EAAAA,gBAAgB,GAChB;AACI,QAAG,KAAKP,KAAL,CAAWI,cAAd,EACA;AACI,0BACI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH,KALD,MAOA;AACI,0BACI,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH;AACJ;;AAEDK,EAAAA,gBAAgB,GAChB;AACI,QAAG,KAAKT,KAAL,CAAWK,cAAd,EACA;AACI,0BACI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH,KALD,MAOA;AACI,0BACI,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH;AACJ;;AAEDK,EAAAA,kBAAkB,GAClB;AACI,QAAG,KAAKV,KAAL,CAAWM,gBAAd,EACA;AACI,0BACI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH,KALD,MAOA;AACI,0BACI,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH;AACJ;;AAEDyC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,oBACwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADxB,EAEK,KAAK/C,KAAL,CAAWE,IAAX,IAAmB,KAAKF,KAAL,CAAWE,IAAX,CAAgB8C,MAAhB,KAA2B,CAA9C,gBAED,oBAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAmB,MAAA,EAAE,EAAE,EAAvB;AAA2B,MAAA,EAAE,EAAE,EAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADR,eAEQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFR,eAGQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKpC,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAmC,KAAKL,gBAAL,EAAnC,CAAX,eAA+E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA/E,qBAHR,eAIQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKM,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAmC,KAAKJ,gBAAL,EAAnC,CAAX,eAA+E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA/E,oBAJR,eAKQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKK,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqC,KAAKJ,kBAAL,EAArC,CAAX,eAAmF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAnF,sBALR,eAMQ,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANR,CADJ,CADJ,eAWI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKV,KAAL,CAAWE,IAAX,CAAgB+C,GAAhB,CAAoB,CAACC,GAAD,EAAKC,GAAL,MACjBvD,KAAK,GAAG,CAAR,EACAZ,MAAM,CAACkE,GAAG,CAACE,QAAL,CAAN,CAAqBC,IAArB,CAA0BrE,MAAM,EAAhC,IAAsC,CAAtC,GACAkE,GAAG,CAACI,kBAAJ,IAA0BJ,GAAG,CAACI,kBAAJ,CAAuBL,GAAvB,CAA4BM,MAAD,IAAaA,MAAM,CAACvB,GAAP,KAAe,KAAKhC,KAAL,CAAWC,IAAX,CAAgB+B,GAA/B,GAAqCpC,KAAK,GAAG,CAA7C,GAAgD,EAAxF,CAA1B,gBACA,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAEuD,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYD,GAAG,CAACM,KAAhB,CADJ,eAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYN,GAAG,CAACO,IAAhB,CAFJ,eAGI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYP,GAAG,CAACR,MAAhB,CAHJ,eAII,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYQ,GAAG,CAACL,MAAhB,CAJJ,eAKI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYK,GAAG,CAACJ,QAAhB,CALJ,eAMI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYI,GAAG,CAACE,QAAJ,CAAaxB,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,CAAZ,oBAAwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAxC,OAAiD,IAAIgB,IAAJ,CAASM,GAAG,CAACE,QAAb,CAAD,CAAyBM,WAAzB,EAAhD,OAA0F,IAAId,IAAJ,CAASM,GAAG,CAACE,QAAb,CAAD,CAAyBO,aAAzB,KAA4C,IAAIf,IAAJ,CAASM,GAAG,CAACE,QAAb,CAAD,CAAyBO,aAAzB,EAA3C,GAAsF,IAA/K,CANJ,EAQK,KAAK3D,KAAL,CAAWC,IAAX,CAAgB2D,WAAhB,IAA+B,KAAK5D,KAAL,CAAWC,IAAX,CAAgB2D,WAAhB,CAA4BZ,MAA5B,GAAqC,EAApE,GACDpD,KAAK,gBACL,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAX,CADK,GAGLX,GAAG,CAACI,kBAAJ,IAA0BJ,GAAG,CAACI,kBAAJ,CAAuBN,MAAvB,GAAgCE,GAAG,CAACY,aAA9D,IAA+EZ,GAAG,CAACa,YAAJ,GAAmBb,GAAG,CAACc,YAAtG,gBACA,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAE;AAACH,QAAAA,KAAK,EAAE;AAAR,OAAf;AAAiC,MAAA,OAAO,EAAE,MAAM,KAAKlD,OAAL,CAAauC,GAAG,CAAC,IAAD,CAAH,GAAYA,GAAG,CAAC,IAAD,CAAf,GAAwBA,GAAG,CAAC,KAAD,CAAxC,CAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAX,CADA,gBAGA,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAW,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAE;AAACW,QAAAA,KAAK,EAAE;AAAR,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAX,CAPC,GASC,uCAjBN,CADA,GAoBE,EArBF,GAqBO,EAvBU,CAApB,CADL,CAXJ,CADJ,CADJ,CADJ,CAFC,GAiDC,gCAnDN,CADJ;AAuDH;;AA/M4B;;AAkNjC,eAAehE,QAAf","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport NavbarApplicant from '../templates/NavbarApplicant';\r\n\r\nvar check = 0;\r\n\r\nclass JobsList extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: {},\r\n            jobs: [],\r\n            sortedJobs: [], \r\n            sortRatingFlag:true, \r\n            sortSalaryFlag: true, \r\n            sortDurationFlag: true\r\n        };\r\n\r\n        this.renderIconRating = this.renderIconRating.bind(this);\r\n        this.renderIconSalary = this.renderIconSalary.bind(this);\r\n        this.renderIconDuration = this.renderIconDuration.bind(this);\r\n        this.showJob = this.showJob.bind(this);\r\n        this.sortRating = this.sortRating.bind(this);\r\n        this.sortSalary = this.sortSalary.bind(this);\r\n        this.sortDuration = this.sortDuration.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('http://localhost:4000/job')\r\n             .then(response => {\r\n                 this.setState({jobs: response.data, sortedJobs:response.data});\r\n             })\r\n             .catch(function(error) {\r\n                 console.log(error);\r\n             })\r\n\r\n        axios.get('http://localhost:4000/user/me', { \r\n            headers: { \r\n                \"token\": localStorage.getItem(\"token\") ? localStorage.getItem(\"token\").split(\" \")[1] : \"\"\r\n            }}).then(res => {\r\n                this.setState({user: res.data});\r\n            }).catch(err => {console.log(err)})\r\n    }\r\n\r\n    showJob(jobId){\r\n        console.log(this.state.user._id);\r\n\r\n        axios.get('http://localhost:4000/job/checkAccepted/'+ this.state.user._id)\r\n            .then(res => {\r\n                res.data.gotAccepted === 1 ? alert(\"Can't Apply! You have been accepted to a job!\") : this.props.history.push('/apply-job/'+jobId);\r\n            })\r\n            .catch(err => {alert(err.response.data)})\r\n    }\r\n\r\n    sortRating()\r\n    {\r\n        var array = this.state.jobs;\r\n        var flag = this.state.sortRatingFlag;\r\n        array.sort(function(a, b) {\r\n            if(a.rating !== undefined && b.rating !== undefined){\r\n                return (1 - flag*2) * (new Date(a.rating) - new Date(b.rating));\r\n            }\r\n            else{\r\n                return 1;\r\n            }\r\n          });\r\n        this.setState({\r\n            jobs:array,\r\n            sortRatingFlag:!this.state.sortRatingFlag,\r\n        })\r\n    }\r\n\r\n    sortSalary()\r\n    {\r\n        var array = this.state.jobs;\r\n        var flag = this.state.sortSalaryFlag;\r\n        array.sort(function(a, b) {\r\n            if(a.salary !== undefined && b.salary !== undefined){\r\n                return (1 - flag*2) * (new Date(a.salary) - new Date(b.salary));\r\n            }\r\n            else{\r\n                return 1;\r\n            }\r\n          });\r\n        this.setState({\r\n            jobs:array,\r\n            sortSalaryFlag:!this.state.sortSalaryFlag,\r\n        })\r\n    }\r\n\r\n    sortDuration()\r\n    {\r\n        var array = this.state.jobs;\r\n        var flag = this.state.sortDurationFlag;\r\n        array.sort(function(a, b) {\r\n            if(a.duration !== undefined && b.duration !== undefined){\r\n                return (1 - flag*2) * (new Date(a.duration) - new Date(b.duration));\r\n            }\r\n            else{\r\n                return 1;\r\n            }\r\n          });\r\n        this.setState({\r\n            jobs:array,\r\n            sortDurationFlag:!this.state.sortDurationFlag,\r\n        })\r\n    }\r\n\r\n    renderIconRating()\r\n    {\r\n        if(this.state.sortRatingFlag)\r\n        {\r\n            return(\r\n                <ArrowDownwardIcon/>\r\n            )\r\n        }\r\n        else\r\n        {\r\n            return(\r\n                <ArrowUpwardIcon/>\r\n            )            \r\n        }\r\n    }\r\n\r\n    renderIconSalary()\r\n    {\r\n        if(this.state.sortSalaryFlag)\r\n        {\r\n            return(\r\n                <ArrowDownwardIcon/>\r\n            )\r\n        }\r\n        else\r\n        {\r\n            return(\r\n                <ArrowUpwardIcon/>\r\n            )            \r\n        }\r\n    }\r\n\r\n    renderIconDuration()\r\n    {\r\n        if(this.state.sortDurationFlag)\r\n        {\r\n            return(\r\n                <ArrowDownwardIcon/>\r\n            )\r\n        }\r\n        else\r\n        {\r\n            return(\r\n                <ArrowUpwardIcon/>\r\n            )            \r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"container\">\r\n                <NavbarApplicant /> <br />\r\n                {this.state.jobs && this.state.jobs.length !== 0 ?\r\n                \r\n                <Grid container>\r\n                    <Grid item xs={12} md={12} lg={12}>\r\n                        <Paper>\r\n                            <Table size=\"small\">\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                            <TableCell>Title</TableCell>\r\n                                            <TableCell>Recruiter Name</TableCell>\r\n                                            <TableCell><Button onClick={this.sortRating}>{this.renderIconRating()}</Button><br />Recruiter Rating</TableCell>\r\n                                            <TableCell><Button onClick={this.sortSalary}>{this.renderIconSalary()}</Button><br />Salary (Rupees)</TableCell>\r\n                                            <TableCell><Button onClick={this.sortDuration}>{this.renderIconDuration()}</Button><br />Duration (months)</TableCell>\r\n                                            <TableCell>Deadline</TableCell>\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody> \r\n                                    {this.state.jobs.map((job,ind) => (\r\n                                        check = 0,\r\n                                        moment(job.deadline).diff(moment()) > 0 ?\r\n                                        job.receivedApplicants && job.receivedApplicants.map((getjob) => (getjob._id === this.state.user._id ? check = 1: \"\" )) ?                                            \r\n                                        <TableRow key={ind}>\r\n                                            <TableCell>{job.title}</TableCell>\r\n                                            <TableCell>{job.name}</TableCell>\r\n                                            <TableCell>{job.rating}</TableCell>\r\n                                            <TableCell>{job.salary}</TableCell>\r\n                                            <TableCell>{job.duration}</TableCell>\r\n                                            <TableCell>{job.deadline.split(\"T\")[0]} <br /> {(new Date(job.deadline)).getUTCHours()}:{(new Date(job.deadline)).getUTCMinutes() ? (new Date(job.deadline)).getUTCMinutes() : \"00\" }</TableCell>\r\n                                            \r\n                                            {this.state.user.jobsApplied && this.state.user.jobsApplied.length < 10 ?\r\n                                            check ?\r\n                                            <TableCell><Button style={{color: 'blue'}}>Applied</Button></TableCell>\r\n                                            :\r\n                                            job.receivedApplicants && job.receivedApplicants.length < job.maxApplicants && job.noOfAccepted < job.maxPositions ?\r\n                                            <TableCell><Button style={{color: 'green'}} onClick={() => this.showJob(job['id'] ? job['id'] : job['_id'])}>Apply</Button></TableCell>\r\n                                            :\r\n                                            <TableCell><Button style={{color: 'red'}}>Full</Button></TableCell>\r\n                                            \r\n                                            : \"You cannot apply to more than 10 jobs\"}\r\n                                        </TableRow>\r\n                                        : \"\" : \"\"\r\n                                        \r\n                                ))}\r\n                                \r\n                                </TableBody>\r\n                            </Table>\r\n                        </Paper>               \r\n                    </Grid>    \r\n                </Grid>\r\n                : \"There are no job listings yet!\" }         \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default JobsList;"]},"metadata":{},"sourceType":"module"}